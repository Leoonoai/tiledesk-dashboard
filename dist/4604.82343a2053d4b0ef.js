"use strict";(self.webpackChunkchat21=self.webpackChunkchat21||[]).push([[4604],{4604:(S,_,d)=>{d.r(_),d.d(_,{ContactEditModule:()=>y});var r=d(69808),p=d(30407),g=d(44034),h=d(48616),m=d(87341),t=d(5e3),s=d(54132),c=d(51062),u=d(39850);const C=["editleadbtn"];function f(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"i",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.goBack())}),t._uU(1,"keyboard_arrow_left"),t.qZA()}}function x(i,l){1&i&&t._UZ(0,"loading-spinner")}function T(i,l){1&i&&(t.TgZ(0,"span",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"EnterValidEmail")," "))}const E=function(i){return{"invalid-email":i}};function A(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",13)(1,"div",4)(2,"label",14),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",15)(6,"input",16),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.lead_fullname=n)}),t.qZA()()(),t.TgZ(7,"div",4)(8,"label",14),t._uU(9," Email "),t.qZA(),t.TgZ(10,"div",15)(11,"input",17),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.lead_email=n)})("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.emailChange(n))}),t.qZA(),t.YNc(12,T,3,3,"span",18),t.qZA()(),t.TgZ(13,"div",4)(14,"label",14),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"div",15)(18,"input",19),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.lead_company=n)}),t.qZA()()(),t.TgZ(19,"div",20)(20,"div",21)(21,"h3",22)(22,"span",23),t._uU(23),t.ALo(24,"translate"),t.qZA(),t._UZ(25,"span",24),t.qZA()()(),t.TgZ(26,"div",4)(27,"label",14),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"div",15)(31,"input",25),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.lead_street_address=n)}),t.qZA()()(),t.TgZ(32,"div",4)(33,"label",14),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"div",15)(37,"input",26),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.lead_city=n)}),t.qZA()()(),t.TgZ(38,"div",4)(39,"label",14),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"div",15)(43,"input",27),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.lead_state=n)}),t.qZA()()(),t.TgZ(44,"div",4)(45,"label",14),t._uU(46),t.ALo(47,"translate"),t.qZA(),t.TgZ(48,"div",15)(49,"input",28),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.lead_postalcode=n)}),t.qZA()()(),t.TgZ(50,"div",4)(51,"label",14),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.TgZ(54,"div",15)(55,"input",29),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.lead_country=n)}),t.qZA()()(),t.TgZ(56,"div",30)(57,"div",21)(58,"h3",22)(59,"span",23),t._uU(60),t.ALo(61,"translate"),t.qZA(),t._UZ(62,"span",24),t.qZA()()(),t.TgZ(63,"div",4)(64,"label",14),t._uU(65),t.ALo(66,"translate"),t.qZA(),t.TgZ(67,"div",15)(68,"input",31),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.lead_phone_number=n)}),t.qZA()()(),t.TgZ(69,"div",32)(70,"div",21)(71,"h3",22)(72,"span",23),t._uU(73," Note "),t.qZA(),t._UZ(74,"span",24),t.qZA()()(),t.TgZ(75,"div",4)(76,"label",14),t._uU(77," Note "),t.qZA(),t.TgZ(78,"div",15)(79,"textarea",33),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.lead_note=n)}),t._uU(80,"   "),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,22,"Name")," "),t.xp6(3),t.Q6J("ngModel",e.lead_fullname),t.xp6(5),t.Q6J("ngModel",e.lead_email)("ngClass",t.VKq(42,E,!e.EMAIL_IS_VALID)),t.xp6(1),t.Q6J("ngIf",!e.EMAIL_IS_VALID),t.xp6(3),t.hij(" ",t.lcZ(16,24,"Company")," "),t.xp6(3),t.Q6J("ngModel",e.lead_company),t.xp6(5),t.hij(" ",t.lcZ(24,26,"Address")," "),t.xp6(5),t.hij(" ",t.lcZ(29,28,"StreetAddress")," "),t.xp6(3),t.Q6J("ngModel",e.lead_street_address),t.xp6(3),t.hij(" ",t.lcZ(35,30,"City")," "),t.xp6(3),t.Q6J("ngModel",e.lead_city),t.xp6(3),t.hij(" ",t.lcZ(41,32,"State")," "),t.xp6(3),t.Q6J("ngModel",e.lead_state),t.xp6(3),t.hij(" ",t.lcZ(47,34,"PostalCode")," "),t.xp6(3),t.Q6J("ngModel",e.lead_postalcode),t.xp6(3),t.hij(" ",t.lcZ(53,36,"Country")," "),t.xp6(3),t.Q6J("ngModel",e.lead_country),t.xp6(5),t.hij(" ",t.lcZ(61,38,"PhoneNumber")," "),t.xp6(5),t.hij(" ",t.lcZ(66,40,"PhoneNumber")," "),t.xp6(3),t.Q6J("ngModel",e.lead_phone_number),t.xp6(11),t.Q6J("ngModel",e.lead_note)}}const M=function(i){return{"margin-top":i}};let b=(()=>{class i{constructor(e,o,n,a,v,N,L,D){this.location=e,this.route=o,this.contactsService=n,this.notify=a,this.translate=v,this.auth=N,this.logger=L,this.router=D,this.EMAIL_IS_VALID=!0,this.HAS_EDIT_FULLNAME=!1,this.HAS_EDIT_EMAIL=!1,this.showSpinner=!1}ngOnInit(){this.translateEditContactSuccessMsg(),this.translateEditContactErrorMsg(),this.getRequesterIdParamAndThenGetContactById(),this.getBrowserVersion(),this.getCurrentRouteUrlToHideDisplayGoToBackBtn(),this.getFragment()}getFragment(){this.route.fragment.subscribe(e=>{this.fragment=e})}ngAfterViewInit(){try{setTimeout(()=>{const e=document.querySelector("."+this.fragment);e&&e.scrollIntoView()},1e3)}catch(e){}}getCurrentRouteUrlToHideDisplayGoToBackBtn(){const e=this.router.url;-1!==e.indexOf("/_edit")?this.HIDE_GO_BACK_BTN=!0:-1!==e.indexOf("/edit")&&(this.HIDE_GO_BACK_BTN=!1)}getBrowserVersion(){this.auth.isChromeVerGreaterThan100.subscribe(e=>{this.isChromeVerGreaterThan100=e})}translateEditContactSuccessMsg(){this.translate.get("EditContactSuccessNoticationMsg").subscribe(e=>{this.editContactSuccessNoticationMsg=e})}translateEditContactErrorMsg(){this.translate.get("EditContactErrorNoticationMsg").subscribe(e=>{this.editContactErrorNoticationMsg=e})}getRequesterIdParamAndThenGetContactById(){this.lead_id=this.route.snapshot.params.requesterid,this.logger.log("[CONTACT-EDIT] GET REQUESTER ID PARAM AND THEN GET CONTACT BY ID -> REQUESTER ID ",this.lead_id),this.lead_id&&this.getContactById()}getContactById(){this.showSpinner=!0,this.contactsService.getLeadById(this.lead_id).subscribe(e=>{e&&(this.logger.log("[CONTACT-EDIT] - GET LEAD BY ID ",e),this.lead_fullname=e.fullname,this.lead_email=e.email,this.lead_company=e.company,this.lead_street_address=e.streetAddress,this.lead_city=e.city,this.lead_state=e.region,this.lead_postalcode=e.zipcode,this.lead_country=e.country,this.lead_phone_number=e.phone,this.lead_note=e.note)},e=>{this.showSpinner=!1,this.logger.error("[CONTACT-EDIT]  - GET LEAD BY REQUESTER ID - ERROR ",e)},()=>{this.showSpinner=!1,this.logger.log("[CONTACT-EDIT]  - GET LEAD BY REQUESTER ID * COMPLETE *")})}editContact(){this.HAS_EDIT_FULLNAME=!1,this.HAS_EDIT_EMAIL=!1,this.EMAIL_IS_VALID=!0,this.edit_lead_btn_ref.nativeElement.blur(),this.lead_fullname&&(this.lead_fullname=this.lead_fullname.trim()),this.lead_email&&(this.lead_email=this.lead_email.trim()),this.lead_company&&(this.lead_company=this.lead_company.trim()),this.lead_street_address&&(this.lead_street_address=this.lead_street_address.trim()),this.lead_city&&(this.lead_city=this.lead_city.trim()),this.lead_state&&(this.lead_state=this.lead_state.trim()),this.lead_postalcode&&(this.lead_postalcode=this.lead_postalcode.trim()),this.lead_country&&(this.lead_country=this.lead_country.trim()),this.lead_phone_number&&(this.lead_phone_number=this.lead_phone_number.trim()),this.lead_note&&(this.lead_note=this.lead_note.trim()),this.contactsService.updateLead(this.lead_id,this.lead_fullname,this.lead_email,this.lead_company,this.lead_street_address,this.lead_city,this.lead_state,this.lead_postalcode,this.lead_country,this.lead_phone_number,this.lead_note).subscribe(e=>{this.logger.log("[CONTACT-EDIT] - UPDATED CONTACT ",e)},e=>{this.logger.error("[CONTACT-EDIT] - UPDATE CONTACT - ERROR ",e),this.notify.showWidgetStyleUpdateNotification(this.editContactErrorNoticationMsg,4,"report_problem")},()=>{this.logger.log("[CONTACT-EDIT] - UPDATE CONTACT * COMPLETE *"),this.notify.showWidgetStyleUpdateNotification(this.editContactSuccessNoticationMsg,2,"done")})}emailChange(e){this.logger.log("[CONTACT-EDIT] - EDITING EMAIL ",e),this.logger.log("[CONTACT-EDIT] - EDITING EMAIL length ",e.length),this.EMAIL_IS_VALID=this.validateEmail(e),this.logger.log("[CONTACT-EDIT] - EMAIL IS VALID ",this.EMAIL_IS_VALID),0===e.length&&(this.EMAIL_IS_VALID=!0)}validateEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}goBack(){this.location.back()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(r.Ye),t.Y36(s.gz),t.Y36(p.P),t.Y36(g.c),t.Y36(c.sK),t.Y36(m.e),t.Y36(h.m),t.Y36(s.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["appdashboard-contact-edit"]],viewQuery:function(e,o){if(1&e&&t.Gf(C,5),2&e){let n;t.iGM(n=t.CRH())&&(o.edit_lead_btn_ref=n.first)}},decls:17,vars:13,consts:[[1,"navbar-brand",2,"z-index","1050","position","relative","padding-left","30px",3,"ngStyle"],["class","material-icons","style","vertical-align: middle !important; cursor: pointer;",3,"click",4,"ngIf"],[1,"main-content",2,"padding-top","0px"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card","card--no-border"],[4,"ngIf"],["class","card-content",4,"ngIf"],[1,"card-footer",2,"border-color","#e8f0f5 !important"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["editleadbtn",""],[1,"material-icons",2,"vertical-align","middle !important","cursor","pointer",3,"click"],[1,"card-content"],[1,"col-sm-2","custom-label"],[1,"col-xs-12","col-sm-6","col-md-6","col-lg-6"],["name","fullname","type","text",1,"input",3,"ngModel","ngModelChange"],["name","email","type","text",1,"input",2,"margin-bottom","3px",3,"ngModel","ngClass","ngModelChange"],["style","color: #f44336; font-size: 12px;",4,"ngIf"],["name","company","type","text",1,"input",3,"ngModel","ngModelChange"],[1,"row","address"],[1,"col-md-12","col-12-section-title"],[1,"card_title__underlined"],[1,"card_title__underline"],[1,"card_title__gray_underline"],["name","street_address","type","text",1,"input",3,"ngModel","ngModelChange"],["name","city","type","text",1,"input",3,"ngModel","ngModelChange"],["name","state","type","text",1,"input",3,"ngModel","ngModelChange"],["name","postalcode","type","text",1,"input",3,"ngModel","ngModelChange"],["name","country","type","text",1,"input",3,"ngModel","ngModelChange"],[1,"row","phone"],["name","phone_number","type","text",1,"input",3,"ngModel","ngModelChange"],[1,"row","note"],["name","note","rows","3","type","text",1,"input",3,"ngModel","ngModelChange"],[2,"color","#f44336","font-size","12px"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,f,2,0,"i",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6),t.YNc(9,x,1,0,"loading-spinner",7),t.TgZ(10,"form"),t.YNc(11,A,81,44,"div",8),t.TgZ(12,"div",9)(13,"button",10,11),t.NdJ("click",function(){return o.editContact()}),t._uU(15),t.ALo(16,"translate"),t.qZA()()()()()()()()),2&e&&(t.Q6J("ngStyle",t.VKq(11,M,!0===o.isChromeVerGreaterThan100?"-64px":"6px")),t.xp6(1),t.Q6J("ngIf",!1===o.HIDE_GO_BACK_BTN),t.xp6(1),t.hij(" ",t.lcZ(3,7,"EditContact"),"\n"),t.xp6(7),t.Q6J("ngIf",o.showSpinner),t.xp6(2),t.Q6J("ngIf",!o.showSpinner),t.xp6(2),t.Q6J("disabled",!o.EMAIL_IS_VALID),t.xp6(2),t.hij(" ",t.lcZ(16,9,"UpdateContact")," "))},dependencies:[r.mk,r.O5,r.PC,u.g,c.X$],styles:['input[type=text][_ngcontent-%COMP%] {\n  height: 36px;\n  font-size: 14px;\n  width: 100%;\n  margin-bottom: 10px;\n  -webkit-appearance: none;\n  appearance: none;\n  background: #fff;\n  border: 1px solid #d9d9d9 !important;\n  \n  padding: 0 8px;\n  box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  border-radius: 5px;\n  background-color: #fff !important;\n}\n.custom-label[_ngcontent-%COMP%] {\n  color: rgb(118, 149, 165);\n  height: 36px;\n  padding-top: 7px !important;\n  padding-left: 16px !important;\n  padding-right: 16px !important;\n  text-align: right !important;\n}\n@media (min-width: 992px) {\n  .custom-label[_ngcontent-%COMP%] {\n    padding-top: 14px !important;\n  }\n}\ninput[type=text].invalid-email[_ngcontent-%COMP%] {\n  border: 1px solid #f44336 !important;\n}\n.card_title__underlined[_ngcontent-%COMP%] {\n  text-transform: none;\n  color: #566787;\n  margin-bottom: 0px;\n  height: 40px !important;\n  position: relative;\n  font-family: "Poppins", "Roboto", "Arial", sans-serif;\n  height: 30px;\n  font-size: 16px;\n  margin-top: 10px;\n}\n.card_title__underline[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: -1px;\n  border-bottom: 2px solid #3ea9f5;\n  z-index: 2;\n}\n.card_title__gray_underline[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: -1px;\n  border-bottom: 1px solid #ddd;\n  width: calc(33.3333333333% + 372px);\n  z-index: 1;\n}\n.col-12-section-title[_ngcontent-%COMP%] {\n  margin-bottom: 20px;\n}\ntextarea[type=text][_ngcontent-%COMP%] {\n  font-size: 14px;\n  width: 100%;\n  margin-bottom: 10px;\n  -webkit-appearance: none;\n  appearance: none;\n  background: #fff;\n  border: 1px solid #d9d9d9 !important;\n  \n  padding-right: 8px;\n  padding-top: 5px;\n  padding-left: 8px;\n  box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  border-radius: 5px;\n  background-color: #fff !important;\n  border: solid 1px #ddd;\n}']}),i})();var Z=d(31449);const I=[{path:"",component:b}];let y=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[s.Bz.forChild(I),r.ez,c.aw,Z.m,s.Bz]}),i})()}}]);