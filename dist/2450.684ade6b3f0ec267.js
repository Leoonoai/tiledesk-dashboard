"use strict";(self.webpackChunkchat21=self.webpackChunkchat21||[]).push([[2450],{39348:(C,u,s)=>{s.d(u,{k:()=>U});var E=s(87341),S=s(26930),B=s(17744),m=s(48616),g=s(27544),p=s(78446),n=s(8929),O=s(7625),t=s(5e3),b=s(54132),d=s(69808),I=s(51062);const c=function(a){return{"active-item":a}};function f(a,A){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"li",3)(2,"a",4),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"li",5),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.goToAllFlows())}),t.TgZ(6,"a",6),t.O4$(),t.TgZ(7,"svg",7),t._UZ(8,"path",8),t.qZA(),t.kcU(),t.TgZ(9,"p",9),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"span",10),t._uU(13),t.qZA()()(),t.TgZ(14,"li",5),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.goToAiAgents())}),t.TgZ(15,"a",6),t.O4$(),t.TgZ(16,"svg",11),t._UZ(17,"path",12)(18,"rect",13)(19,"path",14)(20,"path",15)(21,"path",16)(22,"path",17),t.qZA(),t.kcU(),t.TgZ(23,"p",9),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"span",10),t._uU(27),t.qZA()()(),t.TgZ(28,"li",5),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.goToAutomations())}),t.TgZ(29,"a",6),t.O4$(),t.TgZ(30,"svg",11),t._UZ(31,"path",18)(32,"circle",19),t.qZA(),t.kcU(),t.TgZ(33,"p",9),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"span",10),t._uU(37),t.qZA()()(),t.TgZ(38,"li",20)(39,"a",4),t._uU(40," Webhooks "),t.qZA()(),t.TgZ(41,"li",5),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.goToFlowWebhooks())}),t.TgZ(42,"a",6),t.O4$(),t.TgZ(43,"svg",21)(44,"g"),t._UZ(45,"rect",22),t.qZA(),t.TgZ(46,"g"),t._UZ(47,"path",23),t.qZA()(),t.kcU(),t.TgZ(48,"p",9),t._uU(49," Webhooks "),t.qZA(),t.TgZ(50,"span",10),t._uU(51),t.qZA()()(),t.BQk()}if(2&a){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,12,"Flows")," "),t.xp6(2),t.Q6J("ngClass",t.VKq(20,c,e.BOTS_MYCHATBOT_ALL_ROUTE_IS_ACTIVE)),t.xp6(5),t.hij(" ",t.lcZ(11,14,"All")," "),t.xp6(3),t.Oqu(e.chatBotCount),t.xp6(1),t.Q6J("ngClass",t.VKq(22,c,e.AIAGENT_ROUTE_IS_ACTIVE)),t.xp6(10),t.hij(" ",t.lcZ(25,16,"AIAgents")," "),t.xp6(3),t.Oqu(e.myChatbotOtherCount),t.xp6(1),t.Q6J("ngClass",t.VKq(24,c,e.AUTOMATION_ROUTE_IS_ACTIVE)),t.xp6(6),t.hij(" ",t.lcZ(35,18,"Automations")," "),t.xp6(3),t.Oqu(e.automationsCount),t.xp6(4),t.Q6J("ngClass",t.VKq(26,c,e.FLOWS_WEBHOOK_ROUTE_IS_ACTIVE)),t.xp6(10),t.Oqu(e.flowWebhooksCount)}}let U=(()=>{class a{constructor(e,o,i,l,r,T,_){this.auth=e,this.logger=o,this.router=i,this.brandService=l,this.prjctPlanService=r,this.appConfigService=T,this.localDbService=_,this.unsubscribe$=new n.xQ,this.kbNameSpaceid="";const h=l.getBrand();this.displayChatbotsCommunity=h.display_chatbots_community,this.displayTemplatesCategory=h.display_templates_category}ngOnInit(){this.getCurrentRoute(),this.getCurrentProject(),this.IS_OPEN=!0,this.getDahordBaseUrlThenOSCODE()}ngOnChanges(){}getCurrentProject(){this.auth.project_bs.subscribe(e=>{if(e){this.project=e;const o=this.localDbService.getFromStorage(`last_kbnamespace-${this.project._id}`);if(this.logger.log("[BOTS-SIDEBAR] storedNamespace",o),o){let i=JSON.parse(o);this.logger.log("[BOTS-SIDEBAR] storedNamespaceObjct",i),this.kbNameSpaceid=i.id}}})}getDahordBaseUrlThenOSCODE(){const e=window.location.href;this.logger.log("[BOTS-SIDEBAR] href ",e);const i=e.split("/#/")[0];if(this.logger.log("[BOTS-SIDEBAR]  dshbrdBaseUrl includes tiledesk.com",i.includes("tiledesk.com")),i.includes("tiledesk.com"))this.isVisibleKNB=!0;else if(!i.includes("tiledesk.com"))if(this.logger.log("[BOTS-SIDEBAR] dshbrdBaseUrl includes tiledesk.com",i.includes("tiledesk.com")),this.public_Key=this.appConfigService.getConfig().t2y12PruGU9wUtEGzBJfolMIgK,this.public_Key.includes("KNB")){let r=this.public_Key.split("-").find(h=>h.startsWith("KNB"));this.logger.log("[BOTS-SIDEBAR] kbn from FT",r);let T=r.split(":");this.logger.log("[BOTS-SIDEBAR] kbnParts from FT",T);let _=T[1];this.logger.log("[BOTS-SIDEBAR] kbnValue from FT",_),"T"===_?this.getProjectPlan():"F"===_&&(this.isVisibleKNB=!1)}else this.isVisibleKNB=!1,this.logger.log('[BOTS-SIDEBAR] this.public_Key.includes("KNB")',this.public_Key.includes("KNB"))}getProjectPlan(){this.prjctPlanService.projectPlan$.pipe((0,O.R)(this.unsubscribe$)).subscribe(e=>{this.logger.log("[BOTS-SIDEBAR] - getProjectPlan project Profile Data",e),e&&this.manageknowledgeBasesVisibility(e)})}manageknowledgeBasesVisibility(e){this.public_Key=this.appConfigService.getConfig().t2y12PruGU9wUtEGzBJfolMIgK,e.customization&&this.logger.log("[BOTS-SIDEBAR] manageknowledgeBasesVisibility USECASE EXIST customization > knowledgeBases (1)",e.customization.knowledgeBases),e.customization&&void 0!==e.customization.knowledgeBases?(this.logger.log("[BOTS-SIDEBAR] manageknowledgeBasesVisibility USECASE A EXIST customization ",e.customization," & knowledgeBases",e.customization.knowledgeBases),!0===e.customization.knowledgeBases?(this.isVisibleKNB=!0,this.logger.log("[BOTS-SIDEBAR] manageknowledgeBasesVisibility USECASE A isVisibleKNB",this.isVisibleKNB)):!1===e.customization.knowledgeBases&&(this.isVisibleKNB=!1,this.logger.log("[BOTS-SIDEBAR] manageknowledgeBasesVisibility USECASE A isVisibleKNB",this.isVisibleKNB))):e.customization&&void 0===e.customization.knowledgeBases?(this.logger.log("[BOTS-SIDEBAR] manageknowledgeBasesVisibility USECASE B EXIST customization ",e.customization," BUT knowledgeBases IS",e.customization.knowledgeBases),this.logger.log("[BOTS-SIDEBAR] manageknowledgeBasesVisibility USECASE B  (from FT) - EXIST KNB ",this.public_Key.includes("KNB")),this.isVisibleKNB=this.getKnbValue(),this.logger.log("[BOTS-SIDEBAR]  this.isVisibleKNB from FT ",this.isVisibleKNB)):void 0===e.customization&&(this.logger.log("[BOTS-SIDEBAR] manageknowledgeBasesVisibility USECASE C customization is  ",e.customization,"get value from FT"),this.isVisibleKNB=this.getKnbValue(),this.logger.log("[BOTS-SIDEBAR]  this.isVisibleKNB from FT ",this.isVisibleKNB))}getKnbValue(){this.public_Key=this.appConfigService.getConfig().t2y12PruGU9wUtEGzBJfolMIgK;let o=this.public_Key.split("-").find(r=>r.startsWith("KNB"));this.logger.log("[BOTS-SIDEBAR] manageknowledgeBasesVisibility  kbn ",o);let i=o.split(":");this.logger.log("[BOTS-SIDEBAR] manageknowledgeBasesVisibility  kbnParts ",i);let l=i[1];return this.logger.log("[BOTS-SIDEBAR] manageknowledgeBasesVisibility  kbnValue ",l),"T"===l||"F"!==l&&void 0}getCurrentRoute(){this.route=this.router.url,this.BOTS_MYCHATBOT_ALL_ROUTE_IS_ACTIVE=-1!==this.route.indexOf("/bots/my-chatbots/all")||-1!==this.route.indexOf("/bots"),this.AIAGENT_ROUTE_IS_ACTIVE=-1!==this.route.indexOf("/flows/flow-aiagent"),this.AUTOMATION_ROUTE_IS_ACTIVE=-1!==this.route.indexOf("/flows/flow-automations"),this.FLOWS_WEBHOOK_ROUTE_IS_ACTIVE=-1!==this.route.indexOf("/flows/flow-webhooks"),this.BOTS_MYCHATBOT_INCREASE_SALES_ROUTE_IS_ACTIVE=-1!==this.route.indexOf("/bots/my-chatbots/increase-sales"),this.BOTS_MYCHATBOT_CUSTOMER_SATISFACTION_ROUTE_IS_ACTIVE=-1!==this.route.indexOf("/bots/my-chatbots/customer-satisfaction"),this.BOTS_ALL_TEMPALTES_ROUTE_IS_ACTIVE=-1!==this.route.indexOf("/bots/templates/all"),this.BOTS_CUSTOMER_SATISFACTION_TEMPALTES_ROUTE_IS_ACTIVE=-1!==this.route.indexOf("/bots/templates/customer-satisfaction"),this.BOTS_INCREASE_SALES_TEMPALTES_ROUTE_IS_ACTIVE=-1!==this.route.indexOf("/bots/templates/increase-sales"),this.BOTS_COMMUNITY_TEMPLATES_ROUTE_IS_ACTIVE=-1!==this.route.indexOf("/bots/templates/community"),this.KNOWLEDGE_BASE_ROUTE_IS_ACTIVE=-1!==this.route.indexOf("/knowledge-bases")}goToAllFlows(){this.router.navigate(["project/"+this.project._id+"/bots/my-chatbots/all"])}goToAiAgents(){this.router.navigate(["project/"+this.project._id+"/flows/flow-aiagent"])}goToAutomations(){this.router.navigate(["project/"+this.project._id+"/flows/flow-automations"])}goToFlowWebhooks(){this.router.navigate(["project/"+this.project._id+"/flows/flow-webhooks"])}goToBotAllTemplates(){this.router.navigate(["project/"+this.project._id+"/bots/templates/all"])}goToBotCommunityTemplates(){this.router.navigate(["project/"+this.project._id+"/bots/templates/community"])}goToBotIncreaseSalesTemplates(){this.router.navigate(["project/"+this.project._id+"/bots/templates/increase-sales"])}goToBotCustomerSatisfactionTemplates(){this.router.navigate(["project/"+this.project._id+"/bots/templates/customer-satisfaction"])}goToBotCustomerSatisfactionBots(){this.router.navigate(["project/"+this.project._id+"/bots/my-chatbots/customer-satisfaction"])}goToBotIncreaseSalesBots(){this.router.navigate(["project/"+this.project._id+"/bots/my-chatbots/increase-sales"])}goToNewKnowledgeBases(){this.router.navigate(""!==this.kbNameSpaceid?["project/"+this.project._id+"/knowledge-bases/"+this.kbNameSpaceid]:["project/"+this.project._id+"/knowledge-bases/0"])}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(E.e),t.Y36(m.m),t.Y36(b.F0),t.Y36(B.c),t.Y36(g.E),t.Y36(S._),t.Y36(p.P))},a.\u0275cmp=t.Xpm({type:a,selectors:[["appdashboard-bots-sidebar"]],inputs:{allTemplatesCount:"allTemplatesCount",customerSatisfactionTemplatesCount:"customerSatisfactionTemplatesCount",increaseSalesTemplatesCount:"increaseSalesTemplatesCount",chatBotCount:"chatBotCount",myChatbotOtherCount:"myChatbotOtherCount",automationsCount:"automationsCount",flowWebhooksCount:"flowWebhooksCount",customerSatisfactionBotsCount:"customerSatisfactionBotsCount",increaseSalesBotsCount:"increaseSalesBotsCount",allCommunityTemplatesCount:"allCommunityTemplatesCount"},features:[t.TTD],decls:3,vars:1,consts:[[1,"settings-sidebar-wpr","settings-sidebar-wpr-opened"],[1,"settings-sidebar"],[4,"ngIf"],[1,"sidebar-item-wpr-no-link"],[1,"sidebar-item-no-link"],[1,"sidebar-item-wpr",3,"ngClass","click"],[1,"sidebar-item"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24"],["d","M16.65 13 11 7.35l5.65-5.65 5.65 5.65zM3 11V3h8v8zm10 10v-8h8v8zM3 21v-8h8v8zM5 9h4V5H5zm11.675 1.2L19.5 7.375 16.675 4.55 13.85 7.375zM15 19h4v-4h-4zM5 19h4v-4H5z"],[1,"custom_paragraph",2,"position","relative","top","1px"],[1,"sidebar-item-s"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"svg-stroke"],["d","M12 8V4H8"],["width","16","height","12","x","4","y","8","rx","2"],["d","M2 14h2"],["d","M20 14h2"],["d","M15 13v2"],["d","M9 13v2"],["d","M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"],["cx","12","cy","12","r","4"],[1,"sidebar-item-wpr-no-link",2,"margin-top","16px"],["xmlns","http://www.w3.org/2000/svg","enable-background","new 0 0 24 24","height","20px","viewBox","0 0 24 24","width","20px","fill","currentColor",1,"svg-fill"],["fill","none","height","24","width","24"],["d","M10,15l5.88,0c0.27-0.31,0.67-0.5,1.12-0.5c0.83,0,1.5,0.67,1.5,1.5c0,0.83-0.67,1.5-1.5,1.5c-0.44,0-0.84-0.19-1.12-0.5 l-3.98,0c-0.46,2.28-2.48,4-4.9,4c-2.76,0-5-2.24-5-5c0-2.42,1.72-4.44,4-4.9l0,2.07C4.84,13.58,4,14.7,4,16c0,1.65,1.35,3,3,3 s3-1.35,3-3V15z M12.5,4c1.65,0,3,1.35,3,3h2c0-2.76-2.24-5-5-5l0,0c-2.76,0-5,2.24-5,5c0,1.43,0.6,2.71,1.55,3.62l-2.35,3.9 C6.02,14.66,5.5,15.27,5.5,16c0,0.83,0.67,1.5,1.5,1.5s1.5-0.67,1.5-1.5c0-0.16-0.02-0.31-0.07-0.45l3.38-5.63 C10.49,9.61,9.5,8.42,9.5,7C9.5,5.35,10.85,4,12.5,4z M17,13c-0.64,0-1.23,0.2-1.72,0.54l-3.05-5.07C11.53,8.35,11,7.74,11,7 c0-0.83,0.67-1.5,1.5-1.5S14,6.17,14,7c0,0.15-0.02,0.29-0.06,0.43l2.19,3.65C16.41,11.03,16.7,11,17,11l0,0c2.76,0,5,2.24,5,5 c0,2.76-2.24,5-5,5c-1.85,0-3.47-1.01-4.33-2.5l2.67,0C15.82,18.82,16.39,19,17,19c1.65,0,3-1.35,3-3S18.65,13,17,13z"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"ul",1),t.YNc(2,f,52,28,"ng-container",2),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngIf","agent"!==o.USER_ROLE))},dependencies:[d.mk,d.O5,I.X$],styles:["li[_ngcontent-%COMP%]    > a[_ngcontent-%COMP%] {\n  margin-top: 5px !important;\n  margin-right: 5px !important;\n  margin-bottom: 5px !important;\n  margin-left: 0px !important;\n  border-radius: 0px;\n}"]}),a})()},98145:(C,u,s)=>{s.d(u,{A:()=>p});var E=s(69808),S=s(93075),B=s(51062),m=s(87238),g=s(5e3);let p=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[E.ez,S.u5,B.aw,m.AV]}),n})()}}]);