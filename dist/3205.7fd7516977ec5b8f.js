"use strict";(self.webpackChunkchat21=self.webpackChunkchat21||[]).push([[3205],{13205:(O,p,s)=>{s.r(p),s.d(p,{SmtpSettingsModule:()=>v});var g=s(69808),c=s(54132),u=s(354),h=s(87341),S=s(44034),_=s(48616),t=s(5e3),d=s(51062),l=s(93075),T=s(1533);function b(i,r){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij("",t.lcZ(2,1,"Settings")," "))}function f(i,r){1&i&&(t.TgZ(0,"span",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"EnterValidEmail")," "))}function M(i,r){1&i&&(t.TgZ(0,"span",2),t._uU(1," visibility_off "),t.qZA())}function E(i,r){1&i&&(t.TgZ(0,"span",2),t._uU(1," visibility "),t.qZA())}const P=function(i){return{"margin-top":i}},C=function(i,r){return{is_opened:i,is_closed:r}},I=function(i,r){return{"page-title--sidebar-settings_opened":i,"page-title--sidebar-settings_closed":r}},x=function(i){return{"invalid-email":i}},m=s(11373);let A=(()=>{class i{constructor(e,n,a,o,y,L){this.projectService=e,this.auth=n,this.location=a,this.notify=o,this.translate=y,this.logger=L,this.SENDER_EMAIL_IS_VALID=!0,this.SMTP_LOGIN_EMAIL_IS_VALID=!0,this.smtp_connetion_security=!1,this.showPswd=!1}ngOnInit(){this.subscribeToCurrentProjectAndGetProjectById(),this.getTranslations(),this.getBrowserVersion(),this.listenSidebarIsOpened()}listenSidebarIsOpened(){this.auth.settingSidebarIsOpned.subscribe(e=>{this.logger.log("[USER-EDIT-ADD] SETTNGS-SIDEBAR isopened (FROM SUBSCRIPTION) ",e),this.IS_OPEN_SETTINGS_SIDEBAR=e})}getBrowserVersion(){this.auth.isChromeVerGreaterThan100.subscribe(e=>{this.isChromeVerGreaterThan100=e})}getTranslations(){this.translate.get("ProjectEditPage.SMTPConfigurationUpdatedSuccessfully").subscribe(e=>{this.SMTPConfigurationUpdatedSuccessfullyMsg=e}),this.translate.get("ProjectEditPage.AnErrorOccurredWhileUpdatingSMTPConfiguration").subscribe(e=>{this.errorUpdatingSMTPConfigurationMsg=e}),this.translate.get("ProjectEditPage.AnErrorOccurredWhileUpdatingSMTPConfiguration").subscribe(e=>{this.errorUpdatingSMTPConfigurationMsg=e}),this.translate.get("ProjectEditPage.ResetToDefaults").subscribe(e=>{this.resetToDefaultsMsg=e}),this.translate.get("AreYouSure").subscribe(e=>{this.areYouSureMsg=e}),this.translate.get("ThisActionIsNotReversible").subscribe(e=>{this.thisActionIsNotReversibleMsg=e}),this.translate.get("SendTo").subscribe(e=>{this.sendToMsg=e}),this.translate.get("Send").subscribe(e=>{this.sendMsg=e}),this.translate.get("Cancel").subscribe(e=>{this.cancelMsg=e}),this.translate.get("AuthenticationFailed").subscribe(e=>{this.authenticationFailedMsg=e}),this.translate.get("AnErrorHasOccurred").subscribe(e=>{this.anErrorHasOccurredMsg=e})}subscribeToCurrentProjectAndGetProjectById(){this.auth.project_bs.subscribe(e=>{e&&(this.projectId=e._id,this.logger.log("[SMTP-SETTINGS] - projectId ",this.projectId),this.getProjectById(this.projectId))})}getProjectById(e){this.projectService.getProjectById(e).subscribe(n=>{this.logger.log("[SMTP-SETTINGS] - GET PROJECT BY ID - project ",n),n&&n.settings&&n.settings.email&&n.settings.email.from&&(this.sender_email_address=n.settings.email.from),n&&n.settings&&n.settings.email&&n.settings.email.config&&n.settings.email.config.host&&(this.smtp_host_name=n.settings.email.config.host),n&&n.settings&&n.settings.email&&n.settings.email.config&&n.settings.email.config.pass&&(this.smtp_pswd=n.settings.email.config.pass),n&&n.settings&&n.settings.email&&n.settings.email.config&&n.settings.email.config.port&&(this.smtp_port=n.settings.email.config.port),n&&n.settings&&n.settings.email&&n.settings.email.config&&n.settings.email.config.secure&&(this.smtp_connetion_security=n.settings.email.config.secure),n&&n.settings&&n.settings.email&&n.settings.email.config&&n.settings.email.config.user&&(this.smtp_usermame=n.settings.email.config.user)},n=>{this.logger.error("[SMTP-SETTINGS] - GET PROJECT BY ID - ERROR ",n)},()=>{this.logger.log("[SMTP-SETTINGS] - getProjectByID * complete ")})}senderEmailChange(e){this.SENDER_EMAIL_IS_VALID=this.validateEmail(e),0===e.length&&(this.SENDER_EMAIL_IS_VALID=!0)}smtpLoginEmailChange(e){this.SMTP_LOGIN_EMAIL_IS_VALID=this.validateEmail(e),0===e.length&&(this.SMTP_LOGIN_EMAIL_IS_VALID=!0)}validateEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}goBack(){this.location.back()}showPassword(){document.querySelector(".show-password-btn").blur(),this.showPswd=!this.showPswd}sendSMTPTestEmail(){document.querySelector(".send-smtp-test-email").blur(),this.logger.log("[SMTP-SETTINGS] - HAS CLICKED SEND TEST EMAIL"),this.presentModalWithInputSendToAndTestEmailButton()}presentModalWithInputSendToAndTestEmailButton(){m(this.sendToMsg,{content:"input",buttons:[this.cancelMsg,this.sendMsg]}).then(e=>{this.logger.log("[SMTP-SETTINGS] - HAS CLICKED SEND RECIPIENT EMAIL",e),this.sendTestEmail(e)})}sendTestEmail(e){this.projectService.sendTestEmail(e.toLowerCase(),this.smtp_host_name,this.smtp_port,this.smtp_connetion_security,this.smtp_usermame,this.smtp_pswd).subscribe(n=>{n&&n.error&&"EAUTH"===n.error.code&&this.notify.showWidgetStyleUpdateNotification(this.authenticationFailedMsg,4,"report_problem"),n&&n.error&&"EAUTH"!==n.error.code&&this.notify.showWidgetStyleUpdateNotification(this.anErrorHasOccurredMsg,4,"report_problem")},n=>{this.logger.error("[SMTP-SETTINGS] sendTestEmail - ERROR ",n),this.notify.showWidgetStyleUpdateNotification(this.anErrorHasOccurredMsg,4,"report_problem")},()=>{this.logger.log("[CONTACTS-DTLS] sendTestEmail * COMPLETE *")})}resetToDefaultSMTPConfiguration(){this.presentModalResetToDefault()}presentModalResetToDefault(){m({title:this.areYouSureMsg+"?",text:this.thisActionIsNotReversibleMsg,icon:"warning",buttons:!0,dangerMode:!0}).then(e=>{e?(this.logger.log("[SMTP-SETTINGS] swal willResetToDefault",e),this.projectService.resetToDefaultSMPTSettings().subscribe(n=>{this.logger.log("[SMTP-SETTINGS] in swal willResetToDefault res ",n)},n=>{this.logger.error("[SMTP-SETTINGS] in swal willResetToDefault - ERROR ",n)},()=>{this.logger.log("[CONTACTS-DTLS] in swal willResetToDefault * COMPLETE *")})):this.logger.log("[CONTACTS-DTLS] swal willDelete",e)})}updateSMTPConfiguration(){this.projectService.updateSMPTSettings(this.smtp_host_name,this.smtp_port,this.sender_email_address.toLowerCase(),this.smtp_usermame,this.smtp_pswd,this.smtp_connetion_security).subscribe(e=>{this.logger.log("[[SMTP-SETTINGS] - SAVE SMTP SETTINGS res ",e)},e=>{this.logger.log("[SMTP-SETTINGS] - SAVE SMTP SETTINGS error ",e),this.notify.showWidgetStyleUpdateNotification(this.errorUpdatingSMTPConfigurationMsg,4,"report_problem")},()=>{this.logger.log("[SMTP-SETTINGS] - SAVE SMTP SETTINGS  * COMPLETE *"),this.notify.showWidgetStyleUpdateNotification(this.SMTPConfigurationUpdatedSuccessfullyMsg,2,"done")})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(u.Y),t.Y36(h.e),t.Y36(g.Ye),t.Y36(S.c),t.Y36(d.sK),t.Y36(_.m))},i.\u0275cmp=t.Xpm({type:i,selectors:[["appdashboard-smtp-settings"]],decls:84,vars:55,consts:[[1,"navbar-brand","navbar-brand-sidebar-settings",3,"ngStyle","ngClass"],["navbarbrand",""],[1,"material-icons"],[4,"ngIf"],[1,"main-content",2,"padding-top","0px","padding-left","5px","padding-right","5px"],[1,"page-title--sidebar-settings",3,"ngClass"],[1,"material-icons",2,"vertical-align","middle !important","cursor","pointer",3,"click"],[1,"container-fluid",2,"padding-left","0px","margin-left","5px"],[1,"content-wpr",2,"display","flex"],[1,"teplate-content",2,"flex","1 1 auto","margin-left","20px"],[1,"row"],[1,"col-md-12"],[1,"card","card--no-border"],[1,"card-content"],[1,"col-sm-3","custom-label"],[1,"col-xs-12","col-sm-6","col-md-5","col-lg-4"],["name","smtphost","type","text",1,"input",3,"ngModel","ngModelChange"],["name","smtp_port","type","text",1,"input",3,"ngModel","ngModelChange"],["name","senderaddress","type","email",1,"input",2,"margin-bottom","3px",3,"ngModel","ngClass","ngModelChange"],["style","color: #f44336; font-size: 12px;",4,"ngIf"],[1,"col-md-12","col-12-section-title",2,"margin-top","25px"],[1,"card_title__underlined"],[1,"card_title__underline"],[1,"card_title__gray_underline"],["name","smtpemail","type","text",1,"input",3,"ngModel","ngModelChange"],[1,"input-group"],["name","smtpswd","autocomplete","new-password",1,"input",2,"border-top-right-radius","0px","border-bottom-right-radius","0px",3,"ngModel","type","ngModelChange"],[1,"input-group-btn",2,"padding-right","0px","padding-left","0px"],["id","smtp-show-password-btn",1,"btn","btn-primary","show-password-btn",3,"click"],["class","material-icons",4,"ngIf"],[1,"checkbox"],["type","checkbox","name","connectionSecurity",3,"ngModel","ngModelChange"],[1,"row",2,"border-top","1px solid  #ddd !important","width","calc((100% / 3) + 360px)","margin-left","18px"],[1,"col-xs-6",2,"padding-left","0px"],[1,"btn","btn-outlined",3,"click"],[1,"col-xs-6",2,"text-align","right","padding-right","0px"],["type","submit",1,"btn","btn-gray-no-boxshadow",2,"margin-right","8px",3,"click"],["type","submit",1,"btn","btn-tdblu-no-boxshadow",3,"click"],[2,"color","#f44336","font-size","12px"]],template:function(e,n){1&e&&(t.TgZ(0,"span",0,1)(2,"i",2),t._uU(3,"settings"),t.qZA(),t.YNc(4,b,3,3,"span",3),t.qZA(),t.TgZ(5,"div",4)(6,"div",5)(7,"i",6),t.NdJ("click",function(){return n.goBack()}),t._uU(8,"keyboard_arrow_left"),t.qZA(),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"div",7)(12,"div",8),t._UZ(13,"appdashboard-settings-sidebar"),t.TgZ(14,"div",9)(15,"div",10)(16,"div",11)(17,"div",12)(18,"form")(19,"div",13)(20,"div",10)(21,"label",14),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"div",15)(25,"input",16),t.NdJ("ngModelChange",function(o){return n.smtp_host_name=o}),t.qZA()()(),t.TgZ(26,"div",10)(27,"label",14),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"div",15)(31,"input",17),t.NdJ("ngModelChange",function(o){return n.smtp_port=o}),t.qZA()()(),t.TgZ(32,"div",10)(33,"label",14),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"div",15)(37,"input",18),t.NdJ("ngModelChange",function(o){return n.sender_email_address=o})("ngModelChange",function(o){return n.senderEmailChange(o)}),t.qZA(),t.YNc(38,f,3,3,"span",19),t.qZA()(),t.TgZ(39,"div",10)(40,"div",20)(41,"h3",21)(42,"span",22),t._uU(43),t.ALo(44,"translate"),t.qZA(),t._UZ(45,"span",23),t.qZA()()(),t.TgZ(46,"div",10)(47,"label",14),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"div",15)(51,"input",24),t.NdJ("ngModelChange",function(o){return n.smtp_usermame=o}),t.qZA()()(),t.TgZ(52,"div",10)(53,"label",14),t._uU(54," Password "),t.qZA(),t.TgZ(55,"div",15)(56,"div",25)(57,"input",26),t.NdJ("ngModelChange",function(o){return n.smtp_pswd=o}),t.qZA(),t.TgZ(58,"span",27)(59,"button",28),t.NdJ("click",function(){return n.showPassword()}),t.YNc(60,M,2,0,"span",29),t.YNc(61,E,2,0,"span",29),t.qZA()()()()(),t.TgZ(62,"div",10)(63,"label",14),t._uU(64),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"div",15)(67,"div",30)(68,"label")(69,"input",31),t.NdJ("ngModelChange",function(o){return n.smtp_connetion_security=o}),t.qZA()()()()()(),t.TgZ(70,"div",32)(71,"div",33)(72,"button",34),t.NdJ("click",function(){return n.sendSMTPTestEmail()}),t.TgZ(73,"span",2),t._uU(74," play_arrow "),t.qZA(),t._uU(75),t.ALo(76,"translate"),t.qZA()(),t.TgZ(77,"div",35)(78,"button",36),t.NdJ("click",function(){return n.resetToDefaultSMTPConfiguration()}),t._uU(79),t.ALo(80,"translate"),t.qZA(),t.TgZ(81,"button",37),t.NdJ("click",function(){return n.updateSMTPConfiguration()}),t._uU(82),t.ALo(83,"translate"),t.qZA()()()()()()()()()()()),2&e&&(t.Q6J("ngStyle",t.VKq(45,P,!0===n.isChromeVerGreaterThan100?"-64px":"6px"))("ngClass",t.WLB(47,C,n.IS_OPEN_SETTINGS_SIDEBAR,!n.IS_OPEN_SETTINGS_SIDEBAR)),t.xp6(4),t.Q6J("ngIf",n.IS_OPEN_SETTINGS_SIDEBAR),t.xp6(2),t.Q6J("ngClass",t.WLB(50,I,n.IS_OPEN_SETTINGS_SIDEBAR,!n.IS_OPEN_SETTINGS_SIDEBAR)),t.xp6(3),t.hij(" ",t.lcZ(10,25,"ProjectEditPage.SMTPSettings")," "),t.xp6(13),t.hij(" ",t.lcZ(23,27,"ProjectEditPage.HostName")," "),t.xp6(3),t.Q6J("ngModel",n.smtp_host_name),t.xp6(3),t.hij(" ",t.lcZ(29,29,"ProjectEditPage.Port")," "),t.xp6(3),t.Q6J("ngModel",n.smtp_port),t.xp6(3),t.hij(" ",t.lcZ(35,31,"ProjectEditPage.SenderAddress")," "),t.xp6(3),t.Q6J("ngModel",n.sender_email_address)("ngClass",t.VKq(53,x,!n.SENDER_EMAIL_IS_VALID)),t.xp6(1),t.Q6J("ngIf",!n.SENDER_EMAIL_IS_VALID),t.xp6(5),t.hij(" ",t.lcZ(44,33,"ProjectEditPage.SMTPAuthenticationAndSecurity")," "),t.xp6(5),t.hij(" ",t.lcZ(49,35,"ProjectEditPage.UserName")," "),t.xp6(3),t.Q6J("ngModel",n.smtp_usermame),t.xp6(6),t.Q6J("ngModel",n.smtp_pswd)("type",n.showPswd?"text":"password"),t.xp6(3),t.Q6J("ngIf",!n.showPswd),t.xp6(1),t.Q6J("ngIf",n.showPswd),t.xp6(3),t.hij(" ",t.lcZ(65,37,"ProjectEditPage.ConnectionSecurity")," "),t.xp6(5),t.Q6J("ngModel",n.smtp_connetion_security),t.xp6(6),t.hij(" ",t.lcZ(76,39,"ProjectEditPage.SendSMPTTestEmail")," "),t.xp6(4),t.hij(" ",t.lcZ(80,41,"ResetToDefaults")," "),t.xp6(3),t.hij(" ",t.lcZ(83,43,"Update")," "))},dependencies:[g.mk,g.O5,g.PC,l._Y,l.Fj,l.Wl,l.JJ,l.JL,l.On,l.F,T.S,d.X$],styles:['input[type=text][_ngcontent-%COMP%] {\n  height: 36px;\n  font-size: 14px;\n  width: 100%;\n  margin-bottom: 10px;\n  -webkit-appearance: none;\n  background: #fff;\n  border: 1px solid #d9d9d9 !important;\n  \n  padding: 0 8px;\n  box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  border-radius: 5px;\n  background-color: #fff !important;\n}\ninput[type=email][_ngcontent-%COMP%] {\n  height: 36px;\n  font-size: 14px;\n  width: 100%;\n  margin-bottom: 10px;\n  -webkit-appearance: none;\n  background: #fff;\n  border: 1px solid #d9d9d9 !important;\n  \n  padding: 0 8px;\n  box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  border-radius: 5px;\n  background-color: #fff !important;\n}\ninput[type=password][_ngcontent-%COMP%] {\n  height: 36px;\n  font-size: 14px;\n  width: 100%;\n  margin-bottom: 10px;\n  -webkit-appearance: none;\n  background: #fff;\n  border: 1px solid #d9d9d9 !important;\n  \n  padding: 0 8px;\n  box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  border-radius: 5px;\n  background-color: #fff !important;\n}\n.custom-label[_ngcontent-%COMP%] {\n  color: rgb(118, 149, 165);\n  height: 36px;\n  padding-top: 7px !important;\n  padding-left: 16px !important;\n  padding-right: 16px !important;\n  text-align: right !important;\n}\n@media (min-width: 992px) {\n  .custom-label[_ngcontent-%COMP%] {\n    padding-top: 14px !important;\n  }\n}\ninput[type=email].invalid-email[_ngcontent-%COMP%] {\n  border: 1px solid #f44336 !important;\n}\n.card_title__underlined[_ngcontent-%COMP%] {\n  text-transform: none;\n  color: #566787;\n  margin-bottom: 0px;\n  height: 40px !important;\n  position: relative;\n  font-family: "Poppins", "Roboto", "Arial", sans-serif;\n  height: 30px;\n  font-size: 16px;\n  margin-top: 10px;\n}\n.card_title__underline[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: -1px;\n  border-bottom: 2px solid var(--blue-20);\n  z-index: 2;\n}\n.card_title__gray_underline[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: -1px;\n  border-bottom: 1px solid #ddd;\n  width: calc(33.3333333333% + 372px);\n  z-index: 1;\n}\n.col-12-section-title[_ngcontent-%COMP%] {\n  margin-bottom: 20px;\n}\n.send-smtp-test-email[_ngcontent-%COMP%] {\n  background: transparent !important;\n  border: 1px solid #3ea9f5 !important;\n  color: #3ea9f5 !important;\n}\n#smtp-show-password-btn[_ngcontent-%COMP%] {\n  padding-bottom: 9px;\n  margin-bottom: 9px;\n  padding-top: 10px;\n  border-top-right-radius: 5px;\n  border-bottom-right-radius: 5px;\n  background-color: var(--blue-20) !important;\n  box-shadow: unset;\n}\n#smtp-show-password-btn[_ngcontent-%COMP%]:hover {\n  background-color: var(--blue-40) !important;\n}']}),i})();var w=s(31449),N=s(69284);const Z=[{path:"",component:A}];let v=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[c.Bz.forChild(Z),g.ez,d.aw,w.m,l.u5,N.i]}),i})()}}]);