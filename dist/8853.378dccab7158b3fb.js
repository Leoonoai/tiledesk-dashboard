"use strict";(self.webpackChunkchat21=self.webpackChunkchat21||[]).push([[8853],{98853:(q,d,o)=>{o.r(d),o.d(d,{EmailTicketingModule:()=>N});var g=o(69808),u=o(87341),T=o(26930),E=o(45148),v=o(48616),_=o(7623),f=o(17744),C=o(66888),t=o(5e3),x=o(1533),s=o(93075),r=o(24376),p=o(51062);function I(e,c){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"Settings")," "))}function k(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"div",22)(1,"div",23)(2,"div",12)(3,"span"),t.O4$(),t.TgZ(4,"svg",24),t._UZ(5,"path",25),t.qZA()(),t.kcU(),t.TgZ(6,"a",26),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.goToEmailTicketingDocs())}),t._uU(7),t.ALo(8,"translate"),t.qZA()()()()}2&e&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"HowEmailTicketingWorks")," "))}function b(e,c){if(1&e&&(t.TgZ(0,"ng-option",33),t._uU(1),t.qZA()),2&e){const n=c.$implicit;t.Q6J("value",n._id),t.xp6(1),t.hij(" ",n.name," ")}}function D(e,c){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",27)(2,"div",12)(3,"h3",13)(4,"span",14),t._uU(5," Department's mailbox "),t.qZA()()(),t.TgZ(6,"div",12),t._UZ(7,"div",15),t.qZA()(),t.TgZ(8,"div",9)(9,"div",12)(10,"p",16),t._uU(11),t.qZA()()(),t.TgZ(12,"div",9)(13,"div",28)(14,"ng-select",29),t.NdJ("ngModelChange",function(a){t.CHM(n);const l=t.oxw();return t.KtG(l.selectedDeptId=a)})("change",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.onSelectedDeptId(a.selectedDeptId))}),t.YNc(15,b,2,2,"ng-option",30),t.qZA()()(),t.TgZ(16,"div",9)(17,"div",12)(18,"label",31),t._uU(19),t.ALo(20,"translate"),t.qZA()()(),t.TgZ(21,"div",9)(22,"div",12)(23,"div",17)(24,"div",18)(25,"input",32),t.NdJ("ngModelChange",function(a){t.CHM(n);const l=t.oxw();return t.KtG(l.ticketingEmailDept=a)}),t.qZA(),t.TgZ(26,"span",20)(27,"button",21),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.copyTicketingEmailDept())}),t.TgZ(28,"span",1),t._uU(29," content_copy "),t.qZA()()()()()()(),t.BQk()}if(2&e){const n=t.oxw();t.xp6(11),t.hij(" Instead of creating a ticket in the ",n.companyName," Default Department you can explicitly specify the department to which the ticket belongs by sending an email to the address genetated after the department selection: "),t.xp6(3),t.Q6J("ngModel",n.selectedDeptId)("clearable",!1),t.xp6(1),t.Q6J("ngForOf",n.departments),t.xp6(4),t.hij(" ",t.lcZ(20,6,"UserEditAddPage.EmailAddress")," "),t.xp6(6),t.Q6J("ngModel",n.ticketingEmailDept)}}const S=function(e){return{"margin-top":e}},Z=function(e,c){return{is_opened:e,is_closed:c}},M=function(e,c){return{"page-title--sidebar-settings_opened":e,"page-title--sidebar-settings_closed":c}};let A=(()=>{class e{constructor(n,i,a,l,m,B){this.deptService=n,this.auth=i,this.logger=a,this.appConfigService=l,this.brandService=m,this.roleService=B,this.email_ticketing_docs_url=_.wA,this.hasCopiedTicketingEmail=!1;const h=m.getBrand();this.hideHelpLink=h.DOCS,this.companyName=h.BRAND_NAME}ngOnInit(){this.roleService.checkRoleForCurrentProject("email-ticketing"),this.getCurrentProjectAndBuildTicketingEmail(),this.getDeptsByProjectId(),this.getBrowserVersion(),this.listenSidebarIsOpened(),this.getOSCODE()}getOSCODE(){this.public_Key=this.appConfigService.getConfig().t2y12PruGU9wUtEGzBJfolMIgK,this.public_Key.split("-").forEach(i=>{i.includes("DEP")&&(this.isVisibleDEP="F"!==i.split(":")[1])}),this.public_Key.includes("DEP")||(this.isVisibleDEP=!1)}getBrowserVersion(){this.auth.isChromeVerGreaterThan100.subscribe(n=>{this.isChromeVerGreaterThan100=n})}getCurrentProjectAndBuildTicketingEmail(){this.auth.project_bs.subscribe(n=>{n&&(this.projectID=n._id,this.logger.log("[EMAIL-TICKETING] projectID ",this.projectID),this.ticketingEmail="support@"+this.projectID+"."+this.appConfigService.getConfig().ticketingEmail)})}copyTicketingEmail(){const n=document.getElementById("ticketing-email");this.logger.log("onSelectedDeptId - selectedDeptId",n),n.select();try{document.execCommand("copy"),this.hasCopiedTicketingEmail=!0}catch(i){this.logger.error("Fallback: Oops, unable to copy",i)}}getDeptsByProjectId(){this.deptService.getDeptsByProjectId().subscribe(n=>{this.logger.log("[EMAIL-TICKETING] - GET DEPTS (FILTERED FOR PROJECT ID)",n),n&&(this.departments=[],n.forEach(i=>{i&&!1===i.default&&(this.logger.log("[EMAIL-TICKETING] - GET DEPTS - DEFAULT DEPT ",i),this.departments.push(i))}))},n=>{this.logger.error("[EMAIL-TICKETING] (FILTERED FOR PROJECT ID) - ERROR",n)},()=>{this.logger.log("[EMAIL-TICKETING] (FILTERED FOR PROJECT ID) - COMPLETE")})}onSelectedDeptId(n){this.logger.log("onSelectedDeptId - selectedDeptId",n),this.buildDeptTicketingEmail(n)}buildDeptTicketingEmail(n){this.ticketingEmailDept=n+"@"+this.projectID+"."+this.appConfigService.getConfig().ticketingEmail}copyTicketingEmailDept(){const n=document.getElementById("ticketing-email-dept");this.logger.log("onSelectedDeptId - selectedDeptId",n),n.select(),document.execCommand("copy")}listenSidebarIsOpened(){this.auth.settingSidebarIsOpned.subscribe(n=>{this.logger.log("[EMAIL-TICKETING] SETTNGS-SIDEBAR is opened (FROM SUBSCRIPTION) ",n),this.IS_OPEN_SETTINGS_SIDEBAR=n})}goToEmailTicketingDocs(){window.open(this.email_ticketing_docs_url,"_blank")}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(E.n),t.Y36(u.e),t.Y36(v.m),t.Y36(T._),t.Y36(f.c),t.Y36(C.N))},e.\u0275cmp=t.Xpm({type:e,selectors:[["appdashboard-email-ticketing"]],decls:37,vars:18,consts:[[1,"navbar-brand","navbar-brand-sidebar-settings",3,"ngStyle","ngClass"],[1,"material-icons"],[4,"ngIf"],[1,"main-content",2,"padding-top","0px","padding-left","5px","padding-right","5px"],[1,"container-fluid",2,"padding-left","5px","padding-right","5px"],[1,"page-title--sidebar-settings",3,"ngClass"],[1,"content-wpr",2,"display","flex"],[1,"teplate-content",2,"flex","1 1 auto","margin-left","20px"],["class","link-to-docs-wpr",4,"ngIf"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-8"],[1,"card","card","card--no-border",2,"margin-top","0px"],[1,"col-md-12"],[1,"card_title__underlined"],[1,"card_title__underline"],[1,"section-subtitle",2,"width","calc((100% / 3) + 372px)"],[1,"paragraph-custom-margin-and-weight"],[1,"ticketing-email-wpr"],[1,"input-group"],["id","ticketing-email","type","text",1,"input",3,"ngModel","ngModelChange"],[1,"input-group-btn"],["id","copy-ticketing-email",1,"btn","btn-tdblu-no-boxshadow","copy-btn",3,"click"],[1,"link-to-docs-wpr"],[1,"row","link-to-docs"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 -960 960 960","width","24px","fill","none"],["d","M260-320q47 0 91.5 10.5T440-278v-394q-41-24-87-36t-93-12q-36 0-71.5 7T120-692v396q35-12 69.5-18t70.5-6Zm260 42q44-21 88.5-31.5T700-320q36 0 70.5 6t69.5 18v-396q-33-14-68.5-21t-71.5-7q-47 0-93 12t-87 36v394Zm-40 118q-48-38-104-59t-116-21q-42 0-82.5 11T100-198q-21 11-40.5-1T40-234v-482q0-11 5.5-21T62-752q46-24 96-36t102-12q58 0 113.5 15T480-740q51-30 106.5-45T700-800q52 0 102 12t96 36q11 5 16.5 15t5.5 21v482q0 23-19.5 35t-40.5 1q-37-20-77.5-31T700-240q-60 0-116 21t-104 59ZM280-494Z"],[1,"custom-anchor-to-docs",3,"click"],[1,"row",2,"margin-top","18px"],[1,"col-xs-12"],["name","dept","placeholder","Select a department",1,"custom",2,"padding-right","12px","max-width","295px",3,"ngModel","clearable","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["for","ticketing-email-dept",2,"margin-top","12px"],["type","text","id","ticketing-email-dept",1,"input",3,"ngModel","ngModelChange"],[3,"value"]],template:function(n,i){1&n&&(t.TgZ(0,"span",0)(1,"i",1),t._uU(2,"settings"),t.qZA(),t.YNc(3,I,3,3,"span",2),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"div",5),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"div",6),t._UZ(10,"appdashboard-settings-sidebar"),t.TgZ(11,"div",7),t.YNc(12,k,9,3,"div",8),t.TgZ(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",9)(17,"div",12)(18,"h3",13)(19,"span",14),t._uU(20," Integrate with your mailbox provider "),t.qZA()()(),t.TgZ(21,"div",12),t._UZ(22,"div",15),t.qZA()(),t.TgZ(23,"div",9)(24,"div",12)(25,"p",16),t._uU(26," To integrate your mailbox, set up automatic forwarding in your current email, to the email address below. When an end-user sends an email (also with images and attachments) it creates a ticket. "),t.qZA()()(),t.TgZ(27,"div",9)(28,"div",12)(29,"div",17)(30,"div",18)(31,"input",19),t.NdJ("ngModelChange",function(l){return i.ticketingEmail=l}),t.qZA(),t.TgZ(32,"span",20)(33,"button",21),t.NdJ("click",function(){return i.copyTicketingEmail()}),t.TgZ(34,"span",1),t._uU(35," content_copy "),t.qZA()()()()()()(),t.YNc(36,D,30,8,"ng-container",2),t.qZA()()()()()()()),2&n&&(t.Q6J("ngStyle",t.VKq(10,S,!0===i.isChromeVerGreaterThan100?"-64px":"6px"))("ngClass",t.WLB(12,Z,i.IS_OPEN_SETTINGS_SIDEBAR,!i.IS_OPEN_SETTINGS_SIDEBAR)),t.xp6(3),t.Q6J("ngIf",i.IS_OPEN_SETTINGS_SIDEBAR),t.xp6(3),t.Q6J("ngClass",t.WLB(15,M,i.IS_OPEN_SETTINGS_SIDEBAR,!i.IS_OPEN_SETTINGS_SIDEBAR)),t.xp6(1),t.hij(" ",t.lcZ(8,8,"EmailTicketing")," "),t.xp6(5),t.Q6J("ngIf",i.hideHelpLink),t.xp6(19),t.Q6J("ngModel",i.ticketingEmail),t.xp6(5),t.Q6J("ngIf",!0===i.isVisibleDEP))},dependencies:[g.mk,g.sg,g.O5,g.PC,x.S,s.Fj,s.JJ,s.On,r.w9,r.jq,p.X$],styles:[".email-ticketing-title[_ngcontent-%COMP%] {\n  font-size: 22px;\n  font-weight: 600;\n  margin-bottom: 6px;\n  padding: 10px 15px 0px;\n}\n\n.link-to-docs-wpr[_ngcontent-%COMP%] {\n  margin-bottom: 16px;\n}\n\n.link-to-docs-wpr[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%]    > span[_ngcontent-%COMP%]    > svg[_ngcontent-%COMP%] {\n  fill: var(--blue-light);\n  vertical-align: middle;\n}\n\n.link-to-docs[_ngcontent-%COMP%] {\n  margin-right: 0px;\n  margin-left: 0px;\n  margin-left: -14px;\n  padding: 10px 0px;\n}\n\n.custom-anchor-to-docs[_ngcontent-%COMP%] {\n  color: var(--blue-light);\n  vertical-align: middle;\n  font-size: 14px;\n  font-weight: 400;\n  cursor: pointer;\n  margin-left: 8px;\n}\n\n.custom-anchor-to-docs[_ngcontent-%COMP%]:hover {\n  text-decoration: underline;\n}\n\ninput[type=text][_ngcontent-%COMP%] {\n  height: 36px;\n  font-size: 14px;\n  width: 100%;\n  margin-bottom: 10px;\n  -webkit-appearance: none;\n  appearance: none;\n  background: #fff;\n  border: 1px solid #d9d9d9 !important;\n  \n  padding: 0 8px;\n  box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  border-radius: 5px;\n  background-color: #fff !important;\n}\n\n.ticketing-email-wpr[_ngcontent-%COMP%] {\n  max-width: 640px;\n}\n\n.paragraph-custom-margin-and-weight[_ngcontent-%COMP%] {\n  margin-bottom: 6px;\n  font-weight: 400;\n}\n\n.copy-btn[_ngcontent-%COMP%] {\n  width: 77px;\n  position: relative;\n  top: -2.1px;\n}\n\n#ticketing-email[_ngcontent-%COMP%] {\n  font-weight: 400;\n}\n\n#ticketing-email-dept[_ngcontent-%COMP%] {\n  font-weight: 400;\n}"]}),e})();var O=o(69284),P=o(31449),y=o(54132);const w=[{path:"",component:A}];let N=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[y.Bz.forChild(w),g.ez,p.aw,O.i,P.m,s.u5,r.A0]}),e})()}}]);