"use strict";(self.webpackChunkchat21=self.webpackChunkchat21||[]).push([[5702],{5702:(A,p,r)=>{r.r(p),r.d(p,{PaymentSuccessModule:()=>v});var u=r(69808),c=r(54132),d=r(51062),h=r(31449),t=r(5e3),m=r(27544),P=r(8929),C=r(87341),f=r(17744),x=r(48616),S=r(354);const b=[{path:"",component:(()=>{class o{constructor(e,i,n,a,l,T,E){this.router=e,this.auth=i,this.brandService=n,this.logger=a,this.prjctPlanService=l,this.route=T,this.projectService=E,this.unsubscribe$=new P.xQ;const g=n.getBrand();this.contact_us_email=g.CONTACT_US_EMAIL,this.contactSalesEmail=g.CONTACT_SALES_EMAIL}ngOnInit(){this.route.queryParams.subscribe(e=>{e.session_id&&this.getSubriscriptionSessionById(e.session_id)}),this.getCurrentProjectAndCurrentUser()}ngAfterViewInit(){}getSubriscriptionSessionById(e){this.projectService.getStripeSessionById(e).subscribe(i=>{const n=i.client_reference_id;if(this.user_id=n.split("_")[0],this.project_id=n.split("_")[1],this.findCurrentProjectAmongAll(this.project_id),this.plan_name=n.split("_")[2],window.analytics)try{window.analytics.page("Ugrade plane Success page",{})}catch(a){}},i=>{this.logger.error("[PRICING - PAYMENT-SUCCESS] - GET STRIPE SESSION BY ID error ",i)},()=>{})}findCurrentProjectAmongAll(e){this.projectService.getProjects().subscribe(i=>{const n=i.find(l=>l.id_project.id===e);if(this.logger.log("[PRICING - PAYMENT-SUCCESS] - FIND CURRENT PROJECT AMONG ALL - current_prjct ",n),this.auth.projectSelected({_id:n.id_project.id,name:n.id_project.name,profile_name:n.id_project.profile.name,trial_expired:n.id_project.trialExpired,trial_days_left:n.id_project.trialDaysLeft,operatingHours:n.id_project.activeOperatingHours},"payment-succcess-page"),!(0,t.X6Q)()&&window.analytics)try{window.analytics.group(n.id_project.id,{name:n.id_project.name,plan:this.plan_name})}catch(l){}},i=>{this.logger.error("[PRICING - PAYMENT-SUCCESS] - FIND CURRENT PROJECT AMONG ALL - ERROR ",i)},()=>{this.logger.log("[PRICING - PAYMENT-SUCCESS] - FIND CURRENT PROJECT AMONG ALL -  * complete ")})}getCurrentProjectAndCurrentUser(){this.auth.project_bs.subscribe(e=>{e&&(this.id_project=e._id,this.updateProject(this.id_project,e.name),this.logger.log("[PRICING - PAYMENT-SUCCESS] - CurrentProject ID ",this.id_project),this.prjctPlanService.planUpdated(this.id_project))}),this.auth.user_bs.subscribe(e=>{if(e&&(this.currentUser=e,this.logger.log("[PRICING - PAYMENT-SUCCESS] currentUser email ",this.currentUser.email),window.rewardful("ready",()=>{window.rewardful("convert",{email:this.currentUser.email})}),!(0,t.X6Q)()&&window.analytics)){let i="";this.currentUser.firstname&&this.currentUser.lastname?i=this.currentUser.firstname+" "+this.currentUser.lastname:this.currentUser.firstname&&!this.currentUser.lastname&&(i=this.currentUser.firstname);try{window.analytics.identify(this.currentUser._id,{name:i,email:this.currentUser.user.email,logins:5})}catch(n){}}})}updateProject(e,i){this.logger.log("[PRICING - PAYMENT-SUCCESS] - PROJECT ID ",e),this.logger.log("[PRICING - PAYMENT-SUCCESS] - PROJECT NAME  ",i),this.projectService.updateProjectName(this.id_project,i).subscribe(n=>{this.logger.log("[PRJCT-EDIT-ADD] - UPDATED PROJECT - RES ",n)},n=>{this.logger.error("[PRJCT-EDIT-ADD] UPDATE PROJECT - ERROR ",n)},()=>{this.logger.log("[PRJCT-EDIT-ADD] UPDATE PROJECT * COMPLETE *")})}goToHome(){this.router.navigate(["/project/"+this.project_id+"/home"])}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.F0),t.Y36(C.e),t.Y36(f.c),t.Y36(x.m),t.Y36(m.E),t.Y36(c.gz),t.Y36(S.Y))},o.\u0275cmp=t.Xpm({type:o,selectors:[["appdashboard-payment-success-page"]],decls:45,vars:20,consts:[[1,"main-content",2,"padding-top","0px","background-color","#ffffff","min-height","calc(100% - 53px)","margin-top","0px","padding","0px"],[1,"plan-bckgrnd","success-payment-bckgrnd",2,"min-height","calc(100vh - 53px)"],[1,"row"],[1,"col-md-12"],[1,"close-pricing-page"],[1,"material-icons","close-btn",3,"click"],[1,"container"],[1,"col-md-12",2,"text-align","center"],[1,"card",2,"box-shadow","0 14px 30px 0 rgba(60,72,91,0.22)","border-radius","10px","margin-top","60px","max-width","960px"],[1,"card-content"],[1,"icon-box"],[1,"material-icons"],[1,"success-page-card-title"],[1,"success-page-card-subtitle"],[1,"success-page-card-subtitle",2,"margin-top","10px"],[1,"col-sm-12"],[1,"custom-hr"],[1,"contat-us",2,"text-align","center","margin-top","15px","margin-bottom","15px"],["target","_blank",2,"text-transform","none","color","#0275d8",3,"href"],[2,"text-align","center","margin-top","15px"],["type","button",1,"btn","btn-tdblu-no-boxshadow",2,"height","54px",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"i",5),t.NdJ("click",function(){return i.goToHome()}),t._uU(6," clear "),t.qZA()()()(),t.TgZ(7,"div",6)(8,"div",2)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",2)(13,"div",3)(14,"div",10)(15,"i",11),t._uU(16,"\ue876"),t.qZA()(),t.TgZ(17,"h1",12),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"h3",13),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"h3",14),t._uU(24),t.ALo(25,"translate"),t.qZA()()(),t.TgZ(26,"div",2)(27,"div",15),t._UZ(28,"hr",16),t.qZA()(),t.TgZ(29,"div",2)(30,"div",15)(31,"div",17)(32,"h4"),t._uU(33),t.ALo(34,"translate"),t.TgZ(35,"a",18),t._uU(36),t.ALo(37,"translate"),t.qZA()()()()()()()()(),t.TgZ(38,"div",2)(39,"div",15)(40,"div",19)(41,"button",20),t.NdJ("click",function(){return i.goToHome()}),t.TgZ(42,"span"),t._uU(43),t.ALo(44,"translate"),t.qZA()()()()()()()()),2&e&&(t.xp6(18),t.hij("",t.lcZ(19,8,"Awesome"),"!"),t.xp6(3),t.hij(" ",t.lcZ(22,10,"YourPaymentIsSuccessfullyDone"),". "),t.xp6(3),t.hij(" ",t.lcZ(25,12,"PleaseCheckYourEmailYouWillReceiveReceipt"),". "),t.xp6(9),t.hij(" ",t.lcZ(34,14,"HavingTrouble"),"? "),t.xp6(2),t.hYB("href","mailto:",i.contactSalesEmail,"?subject=Upgrade Tiledesk plan issue for the project ",i.project_id,"",t.LSH),t.xp6(1),t.hij(" ",t.lcZ(37,16,"ContactUs")," "),t.xp6(7),t.hij(" ",t.lcZ(44,18,"ContinueToHomepage")," "))},dependencies:[d.X$],styles:[".close-pricing-page[_ngcontent-%COMP%] {\n  text-align: right;\n}\n\n.close-btn[_ngcontent-%COMP%] {\n  font-size: 60px;\n  font-weight: 100;\n  color: #000;\n  cursor: pointer;\n  opacity: 0.2;\n}\n\n.close-btn[_ngcontent-%COMP%]:hover {\n  opacity: 0.5;\n}\n\n@media (min-width: 691px) {\n  .plan-bckgrnd[_ngcontent-%COMP%] {\n    background-size: 199px 449px, 188px 100%, 179px 100%;\n    background-position: right -12px bottom, right, calc(100% - 179px);\n    background-repeat: no-repeat;\n  }\n}\n\n.custom-hr[_ngcontent-%COMP%] {\n  border-style: solid;\n  border-width: 4px;\n  border-image: linear-gradient(to left, white 1%, #d3d7e0 50%, white 100%) 100% 0 100% 0/0px 0 3px 0 stretch;\n}\n\n.icon-box[_ngcontent-%COMP%] {\n  color: #fff;\n  position: absolute;\n  margin: 0 auto;\n  left: 0;\n  right: 0;\n  top: -70px;\n  width: 95px;\n  height: 95px;\n  border-radius: 50%;\n  z-index: 9;\n  background: #82ce34;\n  padding: 15px;\n  text-align: center;\n  box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.1);\n}\n\n@media (max-width: 992px) {\n  .icon-box[_ngcontent-%COMP%] {\n    top: -94px !important;\n  }\n}\n\n.icon-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 58px;\n  position: relative;\n  top: 3px;\n}\n\n.success-page-card-title[_ngcontent-%COMP%] {\n  text-align: center;\n  margin-top: 30px;\n  font-family: var(--header-font-family);\n}\n\n.success-page-card-subtitle[_ngcontent-%COMP%] {\n  text-align: center;\n  font-family: var(--header-font-family);\n}\n\n.success-payment-outline-btn[_ngcontent-%COMP%] {\n  color: #4caf50;\n  border: 2px solid #4caf50;\n}\n\n.success-payment-outline-btn[_ngcontent-%COMP%]:active {\n  background-color: #ffffff !important;\n  color: #4caf50;\n}\n\n\n\n.outline-btn[_ngcontent-%COMP%] {\n  background-color: transparent;\n  border-radius: 40px;\n  padding: 18px 36px;\n  line-height: 1.33em;\n  font-weight: 500;\n  font-size: 18px;\n}\n\n\n\n@media (max-width: 410px) {\n  .outline-btn[_ngcontent-%COMP%] {\n    font-size: 14px !important;\n    padding: 16px 24px;\n  }\n}"]}),o})()}];let v=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[c.Bz.forChild(b),u.ez,d.aw,h.m,c.Bz]}),o})()}}]);